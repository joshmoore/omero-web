{% extends "webadmin/base.html" %}
{% load i18n %}


{% comment %}
<!--
  Copyright (C) 2011 University of Dundee & Open Microscopy Environment.
  All rights reserved.

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
{% endcomment %}

{% block link %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static "webadmin/css/picklist.css" %}" type="text/css" media="screen"/>
    <link rel="stylesheet" href="{% static '3rdparty/jquery.chosen/chosen.css' %}" type="text/css" media="screen"/>
{% endblock %}

{% block title %}
    {% if eid %}
        {% trans "Edit scientist" %}
    {% else %}
        {% trans "Add scientist" %}
    {% endif %}

{% endblock %}

{% block script %}
    {{ block.super }}
    <script type="text/javascript" src="{% static "3rdparty/jquery-1.7.1.js" %}"></script>
    <script type="text/javascript" src="{% static '3rdparty/jquery.chosen/chosen.jquery.js' %}"></script>
    
    <script type="text/javascript">
    $(document).ready(function() 
    {
        $("#id_groups").chosen().change(function(event, data) {
            if (data && data.deselected) {
                if (data.deselected === "0") {
                    $("input[name='administrator']").attr('checked', false);
                }
            } else if (data && data.selected) {
                if (data.selected === "0") {
                    $("input[name='administrator']").attr('checked', true);
                }
            }
        });
        
        
        $("input[name='administrator']").click( function() { 
            
            if($("input[name='administrator']").is(':checked')) {
                $('#id_groups option[value=0]').prop('selected', true);
            } else {
                $('#id_groups option[value=0]').prop('selected', false);
            }
            $("#id_groups").trigger("liszt:updated");
        });
        
        
        
    });
    
    </script>

{% endblock %}

{% block center_details %}

{{ block.super }}

<div class="one_column_content">
{% if eid %}
    <h1>{% trans "Edit scientist" %}</h1>
{% else %}
    <h1>{% trans "Add scientist" %}</h1>
{% endif %}

<p>{% trans "Fields marked with an asterisk (*) are mandatory." %}</p>
<br/>

{% if eid %}
    <form action="{% url wamanageexperimenterid "save" eid %}" method="POST" class="standard_form">
{% else %}
    <form action="{% url wamanageexperimenterid "create" %}" method="POST" class="standard_form">
{% endif %}

        {% for field in form %}
        
        {% ifnotequal field.label_tag form.groups.label_tag %}
        
        {{ field.label_tag }}{% if field.field.required %}*{% endif %}
        {{ field }}
        {% if field.errors %}{{ field.errors }}{% endif %}{{ field.help_text|safe }}
        
        {% endifnotequal %}
        
        {% endfor %}

        {% if ldapAuth %}
        <label>LDAP:</label> {{ ldapAuth }}
        {% else %}
            {% if eid %}
            Password: 
            <a href="{% url wamanagechangepasswordid eid %}" class="btn silver"><span>Change Password</span></a>
            {% endif %}
        {% endif %}
        
        {{ form.groups.label_tag }}{% if form.groups.field.required %}*{% endif %}
        {{ form.groups }}
        
        <input type="submit" value="{% trans 'Save' %}" />
        
        <p>{% trans "A user may belong to one or more groups. To define the list of groups user is member of, select them from the <strong>Available groups</strong> box and click the <strong>[<]</strong> button to move them to the <strong>Selected groups</strong> area. Once groups are chosen, select one to specify the user's <strong>Default Group</strong>. The <strong>Default Group</strong> is the group that the user will be logged in to, and will be updated when they switch between groups in the clients." %}{% trans "A user may belong to one or more groups. To define the list of groups user is member of, select them from the <strong>Available groups</strong> box and click the <strong>[<]</strong> button to move them to the <strong>Selected groups</strong> area. Once groups are chosen, select one to specify the user's <strong>Default Group</strong>. The <strong>Default Group</strong> is the group that the user will be logged in to, and will be updated when they switch between groups in the clients." %}{% trans "A user may belong to one or more groups. To define the list of groups user is member of, select them from the <strong>Available groups</strong> box and click the <strong>[<]</strong> button to move them to the <strong>Selected groups</strong> area. Once groups are chosen, select one to specify the user's <strong>Default Group</strong>. The <strong>Default Group</strong> is the group that the user will be logged in to, and will be updated when they switch between groups in the clients." %}{% trans "A user may belong to one or more groups. To define the list of groups user is member of, select them from the <strong>Available groups</strong> box and click the <strong>[<]</strong> button to move them to the <strong>Selected groups</strong> area. Once groups are chosen, select one to specify the user's <strong>Default Group</strong>. The <strong>Default Group</strong> is the group that the user will be logged in to, and will be updated when they switch between groups in the clients." %}{% trans "A user may belong to one or more groups. To define the list of groups user is member of, select them from the <strong>Available groups</strong> box and click the <strong>[<]</strong> button to move them to the <strong>Selected groups</strong> area. Once groups are chosen, select one to specify the user's <strong>Default Group</strong>. The <strong>Default Group</strong> is the group that the user will be logged in to, and will be updated when they switch between groups in the clients." %}{% trans "A user may belong to one or more groups. To define the list of groups user is member of, select them from the <strong>Available groups</strong> box and click the <strong>[<]</strong> button to move them to the <strong>Selected groups</strong> area. Once groups are chosen, select one to specify the user's <strong>Default Group</strong>. The <strong>Default Group</strong> is the group that the user will be logged in to, and will be updated when they switch between groups in the clients." %}{% trans "A user may belong to one or more groups. To define the list of groups user is member of, select them from the <strong>Available groups</strong> box and click the <strong>[<]</strong> button to move them to the <strong>Selected groups</strong> area. Once groups are chosen, select one to specify the user's <strong>Default Group</strong>. The <strong>Default Group</strong> is the group that the user will be logged in to, and will be updated when they switch between groups in the clients." %}</p>
</form>

</div>


{% endblock %}

