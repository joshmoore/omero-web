{% load custom_tags %}
{% load wikitags %}

{% if manager.tgannSize %}
<h1>Tags:
{% for tag in manager.tag_annotations %}
    <a href="{% get_webclient_root_url %}/tag/{{ tag.id }}/"> {{ tag.textValue }}</a> {% if tag.isEditable %}<a href="{% get_webclient_root_url %}/action/remove/?parent={% if manager.project %}pr-{{ manager.project.id}}{% endif %}{% if manager.dataset %}ds-{{ manager.dataset.id}}{% endif %}{% if manager.image %}img-{{ manager.image.id}}{% endif %}&source=tann-{{ tag.id }}&url={{ url }}" onClick="return confirm('Unlink tag?');"><img src="{% get_webclient_static_url %}/images/cut16.png" alt="u" title="unlink"/></a>{% endif %}, 
{% endfor %}
</h1>
{% endif %}

{% if manager.txannSize %}
<h1>Comments:</h1>
    {% for tann in manager.text_annotations %}
    {% if tann.isOwned %}
        <div id="comment_wrapper">
        <div id="comment">
            <div class="head"><a href="mailto:{{ tann.details.owner.email.val }}">{{ tann.getOwner }}</a> posted comment on {{ tann.creationEventDate }} <!--{% if tann.isEditable %}<a href="{% get_webclient_root_url %}/action/edit/comment/{{ tann.id }}/?url={{ url }}"><img src="{% get_webclient_static_url %}/images/color_line16.png" alt="e" title="edit"/></a>{% endif %}--></div>
            <div class="body">{{ tann.textValue|wikify|safe|linebreaks }}</div>
            <div class="footer"></div>
        </div>
        <div class="photo"><img src="{% get_webclient_root_url %}/userphoto/{{ tann.details.owner.id.val }}/" alt="{{ tann.getOwner }}" title="{{ tann.getOwner }}" width="40" height="40" /></div>
        </div>
        <div class="clear"></div>
        <br/>
    {% else %}
        <div id="comment_wrapper_rev">
        <div class="photo"><img src="{% get_webclient_root_url %}/userphoto/{{ tann.details.owner.id.val }}/" alt="{{ tann.getOwner }}" title="{{ tann.getOwner }}" width="40" height="40" /></div>
        <div id="comment_rev">
            <div class="head"><a href="mailto:{{ tann.details.owner.email.val }}">{{ tann.getOwner }}</a> posted comment on {{ tann.creationEventDate }}</div>
            <div class="body">{{ tann.textValue|wikify|safe|linebreaks }}</div>
            <div class="footer"></div>
        </div>
        </div>
        <div class="clear"></div>
        <br/>
    {% endif %}
    
    {% endfor %}
{% endif %}

<!--{% if manager.urlannSize %}
<h1>URLs:</h1>
    <div class="body_url">
    <p>| {% for urlann in manager.url_annotations %}
        {{ urlann.textValue|wikify|safe }} {% if urlann.isEditable %}<a href="{% get_webclient_root_url %}/action/edit/url/{{ urlann.id }}/?url={{ url }}"><img src="{% get_webclient_static_url %}/images/color_line16.png" alt="e" title="edit"/></a> <a href="{% get_webclient_root_url %}/action/remove/?parent={% if manager.project %}pr-{{ manager.project.id}}{% endif %}{% if manager.dataset %}ds-{{ manager.dataset.id}}{% endif %}{% if manager.image %}img-{{ manager.image.id}}{% endif %}&source=uann-{{ urlann.id }}&url={{ url }}" onClick="return confirm('Unlink uri?');"><img src="{% get_webclient_static_url %}/images/cut16.png" alt="u" title="unlink"/></a>{% endif %} | 
    {% endfor %}</p>
    </div>
{% endif %}-->

{% if manager.fileannSize %}
<h1>Files:</h1>
<ol>
    {% for fileann in manager.file_annotations %}
    <li><a href="{% get_webclient_root_url %}/annotation/download/{{ fileann.id }}/" target="_blank">{{ fileann.getFileName }}</a> - {{ fileann.getFileSize|default_if_none:0|filesizeformat }} by {{ fileann.getOwner }} at {{ fileann.creationEventDate }} {% if fileann.isEditable %}<a href="{% get_webclient_root_url %}/action/remove/?parent={% if manager.project %}pr-{{ manager.project.id}}{% endif %}{% if manager.dataset %}ds-{{ manager.dataset.id}}{% endif %}{% if manager.image %}img-{{ manager.image.id}}{% endif %}&source=fann-{{ fileann.id }}&url={{ url }}" onClick="return confirm('Unlink file?');"><img src="{% get_webclient_static_url %}/images/cut16.png" alt="u" title="unlink"/></a>{% endif %}</li>
    {% endfor %}
</ol>
{% endif %}



