{% load i18n %}
{% load markup %}
{% load custom_tags %}

{% if manager.c_size %}
    <table id="dataTable" class="tablesorter"> 
    <thead> 
    <tr> 
        <th>{% trans "Type" %}</th> 
        <th>{% trans "Name" %}</th> 
        <th>{% trans "Action" %}</th> 
    </tr> 
    </thead> 
    <tbody> 
        {% for c in manager.containers.projects %}
        <tr> 
            <td class="product">{% if c.isOwned %}<a href="{% url manage_data "mydata" "project" c.id %}" title="{{ c.name }}"><img id="{{ c.id }}" src="{% url webstatic "images/folder32.png" %}" title="Project" alt="Project"/></a>{% else %}<a href="{% url manage_data "userdata" "project" c.id %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}" title="{{ c.name }}"><img id="{{ c.id }}" src="{% url webstatic "images/folder32.png" %}" title="Project" alt="Project"/></a>{% endif %}</td> 
            <td>{% if c.isOwned %}<a href="{% url manage_data "mydata" "project" c.id %}" title="{{ c.name }}" >{{ c.shortName }}</a>{% else %}<a href="{% url manage_data "userdata" "project" c.id %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}" title="{{ c.name }}" >{{ c.shortName }}</a>{% endif %} <img alt="dataset" title="dataset" src="{% url webstatic "images/folder_image16.png" %}"/>[{{ c.countChildren2 }}]{% if not c.isOwned %} <img src="{% url webstatic "images/kgpg16.png" %}" alt="l" title="locked"/>{% endif %}{% if c.countAnnotations %} <img src="{% url webstatic "images/knotes16.png" %}" alt="a" title="annotation"/>{% endif %} <a href="{% url manage_metadata_details "project" c.id %}" target="metadata_details"><img src="{% url webstatic "images/info16.png" %}" alt="i" title="click to get metadata"/></a></td> 
            <td><input type="checkbox" name="project" id="{{ c.id }}"></td>
        </tr> 
        {% endfor %}
        {% for c in manager.containers.datasets %}
        <tr> 
            <td class="product">{% if c.isOwned %}<a href="{% if manager.project %}{% url manage_data "mydata" "project" manager.project.id "dataset" c.id %}{% else %}{% url manage_data "mydata" "dataset" c.id %}{% endif %}" title="{{ c.name }}"><img id="{{ c.id }}" src="{% url webstatic "images/folder_image32.png" %}" title="Dataset" alt="Dataset"/></a>{% else %}<a href="{% if manager.project %}{% url manage_data "userdata" "project" manager.project.id "dataset" c.id %}{% else %}{% url manage_data "userdata" "dataset" c.id %}{% endif %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}" title="{{ c.name }}"><img id="{{ c.id }}" src="{% url webstatic "images/folder_image32.png" %}" title="Dataset" alt="Dataset"/></a>{% endif %}</td> 
            <td>{% if c.isOwned %}<a href="{% if manager.project %}{% url manage_data "mydata" "project" manager.project.id "dataset" c.id %}{% else %}{% url manage_data "mydata" "dataset" c.id %}{% endif %}" title="{{ c.name }}">{{ c.shortName }}</a>{% else %}<a href="{% if manager.project %}{% url manage_data "userdata" "project" manager.project.id "dataset" c.id %}{% else %}{% url manage_data "userdata" "dataset" c.id %}{% endif %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}" title="{{ c.name }}">{{ c.shortName }}</a>{% endif %} <img src="{% url webstatic "images/image16.png" %}" title="image" alt="image"/>[{{ c.countChildren2 }}]{% if not c.isOwned %} <img src="{% url webstatic "images/kgpg16.png" %}" alt="l" title="locked"/>{% endif %}{% if c.countAnnotations %} <img src="{% url webstatic "images/knotes16.png" %}" alt="a" title="annotation"/>{% endif %} <a href="{% url manage_metadata_details "dataset" c.id %}" target="metadata_details"><img src="{% url webstatic "images/info16.png" %}" alt="i" title="click to get metadata"/></a></td> 
            <td><input type="checkbox" name="dataset" id="{{ c.id }}"></td>
        </tr> 
        {% endfor %}
        {% for c in manager.containers.images %}
        <tr> 
            <td class="product"><a href="#" onclick="return popup('{% url image_viewer c.id %}')"><img id="{{ c.id }}" src="{% url webstatic "images/image32.png" %}" title="Image" alt="Image"/></a></td> 
            <td>{% if c.isOwned %}<a href="{% if manager.project %}{% url manage_data "mydata" "project" manager.project.id "dataset" manager.dataset.id "image" c.id %}{% else %}{% if manager.dataset %}{% url manage_data "mydata" "dataset" manager.dataset.id "image" c.id %}{% else %}{% url manage_data "mydata" "image" c.id %}{% endif %}{% endif %}" title="{{ c.name }}">{{ c.shortName }}</a> {% else %}<a href="{% if manager.project %}{% url manage_data "userdata" "project" manager.project.id "dataset" manager.dataset.id "image" c.id %}{% else %}{% if manager.dataset %}{% url manage_data "userdata" "dataset" manager.dataset.id "image" c.id %}{% else %}{% url manage_data "userdata" "image" c.id %}{% endif %}{% endif %}" title="{{ c.name }}">{{ c.shortName }}</a>{% endif %} {% if not c.isOwned %} <img src="{% url webstatic "images/kgpg16.png" %}" alt="l" title="locked"/>{% endif %}{% if c.countAnnotations %} <img src="{% url webstatic "images/knotes16.png" %}" alt="a" title="annotation"/>{% endif %} <a href="{% url manage_metadata_details "image" c.id %}" target="metadata_details"><img src="{% url webstatic "images/info16.png" %}" alt="i" title="click to get metadata"/></a></td>
            <td><input type="checkbox" name="image" id="{{ c.id }}"></td>
        </tr> 
        {% endfor %}
        
        {% if not manager.project and not manager.dataset and not manager.screen and not manager.criteria %}
        {% if not manager.orphaned %}
        <tr> 
            <td class="product"><a href="{% url manage_data_orphaned nav.whos "orphaned" %}"><img src="{% url webstatic "images/folder_yellow32.png" %}" title="Orphaned images" alt="Orphaned images"/></a></td> 
            <td><a href="{% url manage_data_orphaned nav.whos "orphaned" %}">{% trans "Orphaned images" %}</a></td> 
            <td></td> 
        </tr>
        {% endif %}
        {% endif %}
        
        {% for c in manager.containers.screens %}
        <tr> 
            <td class="product">{% if c.isOwned %}<a href="{% url manage_data "mydata" "screen" c.id %}"><img id="{{ c.id }}" src="{% url webstatic "images/folder_screen32.png" %}" title="{{ c.name }}" alt="screen"/></a>{% else %}<a href="{% url manage_data "userdata" "screen" c.id %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}" title="{{ c.name }}"><img id="{{ c.id }}" src="{% url webstatic "images/folder_screen32.png" %}" title="{{ c.name }}" alt="project"/></a>{% endif %}</td> 
            <td>{% if c.isOwned %}<a href="{% url manage_data "mydata" "screen" c.id %}">{{ c.shortName }}</a>{% else %}<a href="{% url manage_data "userdata" "screen" c.id %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}">{{ c.shortName }}</a>{% endif %} <img alt="plate" title="plate" src="{% url webstatic "images/folder_plate16.png" %}"/>[{{ c.countChildren2 }}]{% if not c.isOwned %} <img src="{% url webstatic "images/kgpg16.png" %}" alt="l" title="locked"/>{% endif %}{% if c.countAnnotations %} <img src="{% url webstatic "images/knotes16.png" %}" alt="a" title="annotation"/>{% endif %} <a href="{% url manage_metadata_details "screen" c.id %}" target="metadata_details"><img src="{% url webstatic "images/info16.png" %}" alt="i" title="click to get metadata"/></a></td> 
            <td><input type="checkbox" name="screen" id="{{ c.id }}"></td>
        </tr> 
        {% endfor %}
        {% for c in manager.containers.plates %}
        <tr> 
            <td class="product">{% if c.isOwned %}<a href="{% if manager.screen %}{% url manage_data "mydata" "screen" manager.screen.id "plate" c.id %}{% else %}{% url manage_data "mydata" "plate" c.id %}{% endif %}" title="{{ c.name }}"><img id="{{ c.id }}" src="{% url webstatic "images/folder_plate32.png" %}" title="{{ c.name }}" alt="project"/></a>{% else %}<a href="{% if manager.screen %}{% url manage_data "userdata" "screen" manager.screen.id "plate" c.id %}{% else %}{% url manage_data "userdata" "plate" c.id %}{% endif %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}" title="{{ c.name }}"><img id="{{ c.id }}" src="{% url webstatic "images/folder_plate32.png" %}" title="{{ c.name }}" alt="screen"/></a>{% endif %}</td> 
            <td>{% if c.isOwned %}<a href="{% if manager.screen %}{% url manage_data "mydata" "screen" manager.screen.id "plate" c.id %}{% else %}{% url manage_data "mydata" "plate" c.id %}{% endif %}">{{ c.shortName }}</a>{% else %}<a href="{% if manager.screen %}{% url manage_data "userdata" "screen" manager.screen.id "plate" c.id %}{% else %}{% url manage_data "userdata" "plate" c.id %}{% endif %}?filter=experimenter&experimenter={{ c.details.owner.id.val }}">{{ c.shortName }}</a>{% endif %} {% if not c.isOwned %} <img src="{% url webstatic "images/kgpg16.png" %}" alt="l" title="locked"/>{% endif %}{% if c.countAnnotations %} <img src="{% url webstatic "images/knotes16.png" %}" alt="a" title="annotation"/>{% endif %} <a href="{% url manage_metadata_details "plate" c.id %}" target="metadata_details"><img src="{% url webstatic "images/info16.png" %}" alt="i" title="click to get metadata"/></a></td> 
            <td><input type="checkbox" name="plate" id="{{ c.id }}"></td>
        </tr> 
        {% endfor %}
    </tbody> 
    </table>
    
{% else %}
    {% trans "No data." %}
{% endif %}