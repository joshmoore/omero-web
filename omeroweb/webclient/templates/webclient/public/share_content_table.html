{% load i18n %}
{% load markup %}
{% load custom_tags %}
{% load wikitags %}

<!--

  Copyright (C) 2011 University of Dundee & Open Microscopy Environment.
                     All rights reserved.

  This program is free software: you can redistribute it and/or modify
  it under the terms of the GNU Affero General Public License as
  published by the Free Software Foundation, either version 3 of the
  License, or (at your option) any later version.

  This program is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU Affero General Public License for more details.

  You should have received a copy of the GNU Affero General Public License
  along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->

    <script type="text/javascript" src="{% url webstatic "javascript/jquery.tablesorter.js" %}"></script>
    <script type="text/javascript" src="{% url webstatic "javascript/jquery.quicksearch.js" %}"></script>
    
    <script type="text/javascript">
        $(document).ready(function(){
                        
            $("#dataTable").tablesorter( {sortList: [[1,0]]} ); 

            $('input#id_search').quicksearch('table#dataTable tbody tr', {
            	'delay': 300,
                'loader': 'span.loading'
            });
        });    
    </script>

{% if share.imgSize %}

    <div id="toolbar" class="toolbar_noborder">
        <input onclick="changeView('icon');" class="button align_right" type="image" src="{% url webstatic "images/view_icon16.png" %}" alt="Change view to icon" title="Change view to icon">
    </div>
    <div class="clear"> </div>
    
    <form class="quicksearch" id="quicksearch" action="#"><label for="id_search">Filter:</label> <input type="text" id="id_search" value="search"> <span class="loading"><img class="loader" alt="Loading" src="{% url webstatic "images/spinner.gif" %}"></span></form>
    
    <table id="dataTable" class="tablesorter">
        <thead> 
            <tr> 
                <th class="action">{% trans "Image" %}</th> 
                <th class="desc">{% trans "Name" %}</th> 
                <th class="roles">{% trans "Date" %}</th> 
            </tr> 
        </thead>
        <tbody>
            {% for c in share.imageInShare %}
                <tr id="{{ c.id }}">
                    <td class="action">
                        {% if share.share.isOwned %}
                        <img src="{% url render_thumbnail_resize 32 c.id  %}" alt="image" alt="image" title="{{ c.name }}{% if not c.isOwned %}, owned by {{ c.getOwner.getNameWithInitial }}{% endif %}{% if not c.link.isOwned %}, linked by {{ c.link.getOwner.getNameWithInitial }}{% endif %}"/>
                        {% else %}
                        <img src="{% url render_thumbnail_resize 32 c.id share.share.id %}" alt="image" alt="image" title="{{ c.name }}{% if not c.isOwned %}, owned by {{ c.getOwner.getNameWithInitial }}{% endif %}{% if not c.link.isOwned %}, linked by {{ c.link.getOwner.getNameWithInitial }}{% endif %}"/>
                        {% endif %}                        
                    </td>
                    <td class="desc">{{ c.name|truncatebefor:"65" }}</td>
                    <td class="roles">{{ c.getDate }}</td>                    
                </tr>
            {% endfor %}
        </tbody>
    </table>    
    </div>
    
{% else %}
    <p>{% trans "No data." %}</p>
{% endif %}
