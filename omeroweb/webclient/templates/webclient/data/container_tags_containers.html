{% load i18n %}
{% load markup %}
{% load custom_tags %}
    

<ul>
    {% if manager.containers.projects or manager.containers.datasets or manager.containers.screens or manager.containers.plates or manager.containers.images %}
    
    {% for i in manager.containers.images %}
        <li id='image-{{ i.id }}' rel="image{% if not i.isOwned %}-locked{% endif %}"><a href="#">{{ i.name|truncatebefor:"30" }}</a></li>
    {% endfor %}
    
    {% for c in manager.containers.projects %}
    <li id='project-{{ c.id }}' rel="project"><a href="#">{{ c.name|truncatebefor:"35" }}</a>
        <ul>
            {% if c.countChildren %}
            {% for d in c.listChildrenWithLinks %}
                <li id='dataset-{{ d.id }}' rel="dataset" {% if d.countChildren %}class="jstree-closed"{% endif %}><a href="#">{{ d.name|truncatebefor:"35" }}</a></li>
            {% endfor %}
            {% endif %}
        </ul>
    </li>
    {% endfor %}

    {% for d in manager.containers.datasets %}
        <li id='dataset-{{ d.id }}' rel="dataset" {% if d.countChildren %}class="jstree-closed"{% endif %}><a href="#">{{ d.name|truncatebefor:"35" }}</a></li>
    {% endfor %}

    {% for c in manager.containers.screens %}
    <li id='screen-{{ c.id }}' rel="screen"><a href="#">{{ c.name|truncatebefor:"35" }}</a>
        <ul>
            {% if c.countChildren %}
            {% for d in c.listChildrenWithLinks %}
                <li id='plate-{{ d.id }}' rel="plate"><a href="#">{{ d.name|truncatebefor:"35" }}</a></li>
            {% endfor %}
            {% endif %}
        </ul>
    </li>
    {% endfor %}
    
    {% for d in manager.containers.plates %}
        <li id='plate-{{ d.id }}' rel="plate" {% if d.countChildren %}class="jstree-closed"{% endif %}><a href="#">{{ d.name|truncatebefor:"35" }}</a></li>
    {% endfor %}
    {% else %}
    <li>empty</li>
    {% endif %}
</ul>